const router = require("express").Router();
const { register,memberList,findSponser,memberPreview,buildTreeData } = require("../controllers/register");
const { upload } = require("../middleware/multer");

const fileUpload = upload.fields([
  { name: "applicantPhoto", maxCount: 1 },
  { name: "applicantSign", maxCount: 1 },
  { name: "sponsorSign", maxCount: 1 },
]);

router.post("/register", fileUpload, register);
router.get("/list",memberList);
router.get("/sponsor-member/:memberId",findSponser);
router.get("/member-preview/:memberId",memberPreview);
router.get("/tree-node-tree/:memberId",buildTreeData);

module.exports = router;
